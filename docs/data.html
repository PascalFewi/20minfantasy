<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>20min Fantasy ‚Äì Spieler√ºbersicht</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    <style>
        body { font-family: sans-serif; padding: 2rem; }
        h2 { margin-bottom: 1rem; }
        table { width: 100%; }
    </style>
</head>
<body><h1>20 Min Fantasy - Spieler</h1>
    <h3>üîç Alle Spieler ‚Äì sortierbar & filterbar mit der Search-Bar rechts.</h3>
    <p>Nur die ersten 100 Spieler werden angezeigt.</p>

    <table id="players" class="display">
        <thead>
            <tr>
                <th>Vorname</th>
                <th>Nachname</th>
                <th>Pos</th>
                <th>Total Punkte</th>
                <th>Min gespielt</th>
                <th>√ò Punkte</th>
                <th>Preis</th>
                <th>Total Punkte / Preis</th>
                <th>√ò Punkte / Preis</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script>
    $(document).ready(function () {
        fetch('data.csv')
            .then(response => response.text())
            .then(text => {
                const rows = text.trim().split('\n').slice(1, 201); // skip header, take 100
                const tableBody = $('#players tbody');
                rows.forEach(row => {
                    const cols = row.split(',');
                    cols.shift(); // remove the index column (first empty field)

                    tableBody.append(`<tr>
                        <td>${cols[2]}</td>  <!-- firstName -->
                        <td>${cols[3]}</td>  <!-- lastName -->
                        <td>${cols[5]}</td>  <!-- position -->
                        <td>${cols[11]}</td> <!-- totalPoints -->
                        <td>${cols[17]}</td> <!-- minutesPlayed -->
                        <td>${cols[9]}</td>  <!-- averagePoints -->
                        <td>${cols[6]}</td>  <!-- price -->
                        <td>${cols[41]}</td> <!-- totalPoints_per_price -->
                        <td>${cols[40]}</td> <!-- averagePoints_per_price -->
                    </tr>`);
                });

                $('#players').DataTable({
                    columnDefs: [
                        {
                            targets: 2,      // "position" column
                            orderable: false
                        }
                    ]
                });
            });
    });
</script>
</body>
</html>
